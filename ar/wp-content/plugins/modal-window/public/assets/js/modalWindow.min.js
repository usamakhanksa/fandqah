"use strict";jQuery(document).ready((function(e){if(!e||void 0===e)return console.log("[ModalWindow] No jQuery library detected. Load ModalWindow after jQuery has been loaded on the page.");if(e.fn.ModalWindow=function(n){const o={overlay:!0,blockPage:!0,action:["load",0],scrolled:[0,"px"],animation:["no",400,"no",400],closeBtn:[!1,0],autoClose:[!1,5],closeAction:[!1,!1],video:[!1,!1,!1],screenMax:[!1,1024],screenMin:[!1,480],mobile:[480,85,"%"],floatBtnAnimation:[!1,"no",5,"has-animation",5],cookie:[!1,0,"cookie-name",".modal-only-once"],closeRedirect:[!1,"",""],triggers:["modal-open","modal-close","close-btn"],openSelectors:"",closeSelectors:"",byURL:[!1,"popup=active"],referrer:[!1,""],trackingOpen:[!1,"Modal Open","Modal Window","",""],trackingClose:[!1,"Modal Close","Modal Window","",""],geotargeting:!1,countries:["UA"],style:{},closeForm:3};return this.each((function(){const t=e.extend(!0,{},o,n),i=this,c=e(this).children(".modal-window__wrapper"),r=e(c).children(".modal-window__content"),a=e(i).children(".modal-float-button"),l=e(i).find(".modal-window__form"),s=e(i).find(".wpcf7, form.wpforms-form"),d=e(window).width();e(window).height();let u;const f=function(){let n=e(r).find('iframe[src*="youtube.com"]'),o=e(r).find('iframe[src*="vimeo.com"]');return n.length>0?n:o.length>0&&o}();function m(){let e=1e3*parseInt(t.closeForm);setTimeout((function(){v()}),e)}function p(e){const n=e[0];let o={};return o[e[1]]=e[2],"scale"===n&&(o.percent=1),{type:n,options:o}}async function g(){let e=[];if(e.push(!(!0===t.screenMax[0]&&t.screenMax[1]<d||!0===t.screenMin[0]&&t.screenMin[1]>d)),e.push(function(){if(!t.byURL[0])return!0;const e=t.byURL[1].split("="),n=e[0],o=e[1];return new URLSearchParams(document.location.search).get(n)===o}()),e.push(!t.referrer[0]||""===t.referrer[1]||document.referrer.includes(t.referrer[1])),t.geotargeting){const n=await new Promise(((e,n)=>{fetch("https://get.geojs.io/v1/ip/country.json").then((e=>e.json())).then((n=>{t.countries.includes(n.country)?e(!0):e(!1)})).catch((n=>{console.error("Error:",n),e(!1)}))}));e.push(n)}return e.every((e=>!0===e))}function w(){!function(){if(t.video[0]&&t.video[1]&&f){let n=e(f).attr("src");e(f).attr("src",n+"?autoplay=1")}}(),t.closeBtn[0]||function(){const n=1e3*parseInt(t.closeBtn[1]);setTimeout((function(){e(r).find(".modal-window__close").fadeIn()}),n)}(),!0===t.autoClose[0]&&function(){let e=1e3*parseInt(t.autoClose[1]);setTimeout((function(){v()}),e)}(),e(a).length&&e(a).addClass("is-paused"),function(){if(!t.cookie[0])return;const e=24*parseFloat(t.cookie[1])*60*60*1e3,n={value:"yes",expiry:(new Date).getTime()+e};localStorage.setItem(t.cookie[2],JSON.stringify(n))}(),function(){if(!t.trackingOpen[0])return!1;if("function"!=typeof window.gtag)return!1;const e=t.trackingOpen[1];let n={event_category:t.trackingOpen[2]};t.trackingOpen[3]&&(n.event_label=t.trackingOpen[3]),t.trackingOpen[4]&&(n.value=t.trackingOpen[4]),gtag("event",e,n)}()}function h(){if(function(e){const n=localStorage.getItem(e);if(!n)return!1;const o=JSON.parse(n);return!((new Date).getTime()>o.expiry&&(localStorage.removeItem(e),1))}(t.cookie[2])&&t.cookie[0])return;const n=parseInt(t.animation[1]);t.overlay&&e(c).addClass("has-overlay"),t.blockPage&&(e(c).addClass("is-block"),e("html, body").addClass("no-scroll")),e(c).fadeIn(n,(function(){const o=t.animation[0].split(":")[0],i=t.animation[0].split(":"),c={no:()=>e(r).show(0),fade:()=>e(r).fadeIn(n)}[o]||function(){const o=e(r).css("background-color");e(r).css({"background-color":o});const t=p(i);e(r).show(t.type,t.options,n)};u=document.activeElement,setTimeout((()=>{e(r).focus()}),50),e("body").children().each((function(){e(this).find(".modal-window__content").length||e(this).hasClass("modal-window__content")||e(this).attr("inert","")})),c(),w()}))}function y(){let e=1e3*parseInt(t.action[1]);setTimeout((function(){h()}),e)}function k(){e(a).on("animationend webkitAnimationEnd",(function(n){e(a).removeClass("has-animation"),function(){let n=1e3*parseFloat(t.floatBtnAnimation[4]);setTimeout((function(){e(a).addClass("has-animation"),k()}),n)}()}))}function v(){let n=parseInt(t.animation[3]);const o=t.animation[2].split(":")[0],i=t.animation[2].split(":");e("[inert]").removeAttr("inert"),u&&u.focus();({no:()=>e(r).hide(0,b),fade:()=>e(r).fadeOut(n,b)}[o]||function(){const o=p(i);e(r).hide(o.type,o.options,n,b)})(),function(){if(t.video[0]&&t.video[2]&&f){let n=e(f).attr("src");n=n.split("?")[0],e(f).attr("src",n+"?autoplay=0")}}(),function(){if(t.closeRedirect[0]){let e=t.closeRedirect[1];""!==e&&e.indexOf("http")>-1&&window.open(e,t.closeRedirect[2])}}(),function(){if(!t.trackingClose[0])return!1;if("function"!=typeof window.gtag)return!1;const e=t.trackingClose[1];let n={event_category:t.trackingClose[2]};t.trackingClose[3]&&(n.event_label=t.trackingClose[3]),t.trackingClose[4]&&(n.value=t.trackingClose[4]),gtag("event",e,n)}(),e(a).length&&e(a).removeClass("is-paused")}function b(){let n=parseFloat(t.animation[3]);t.overlay?e(c).fadeOut(n):e(c).fadeOut(0),t.blockPage&&(e(c).removeClass("is-block"),e("html, body").removeClass("no-scroll"))}e(s).length&&e(s).on("wpcf7submit wpformsAjaxSubmitSuccess",m),e(l).length&&e(l).on("submit",(function(n){n.preventDefault();const o=e(this),t=o.attr("id"),i=o.find(".modal-window__form-result"),c=o.serialize();let r={action:"modal_window_form",nonce:ModalWindow.nonce,form_id:t};c.split("&").forEach((function(e){const n=e.split("=");r[decodeURIComponent(n[0])]=decodeURIComponent(n[1])})),e.ajax({type:"POST",url:ModalWindow.ajaxurl,data:r,success:function(n){e(i).html(n),m()},error:function(e,n,o){console.error("Ajax request failed: ",n,o)}})})),e(i).css(t.style),t.mobile[0]>=d&&e(i).css({"--mw-width":`${t.mobile[1]}${t.mobile[2]}`}),async function(){if(!await g())return;!function(){if(!e(a).length)return;if(e(a).removeClass("is-inactive"),!t.floatBtnAnimation[0])return;e(a).addClass(`has-animation ${t.floatBtnAnimation[1]}`),k()}();const n=t.action[0];"load"===n&&y(),"hover"===n&&function(){let n=t.triggers[0],o="#"+n+", ."+n+', a[href$="'+n+'"]';void 0!==t.openSelectors&&""!==t.openSelectors.trim()&&(o+=`, ${t.openSelectors}`),e(o).on("mouseover",(function(e){e.preventDefault(),h()}))}(),"close"===n&&function(){let n=!1;e(document).on("mouseleave",(function(e){!1===n&&h(),n=!0}))}(),"scroll"===n&&function(){let n=!1;e(document).on("scroll",(function(){let o=e(window).scrollTop(),i=e(document).height(),c=e(window).height();if("px"===t.scrolled[1])e(this).scrollTop()>=t.scrolled[0]&&!1===n&&(y(),n=!0);else{let e=o/(i-c);Math.round(100*e)>=parseInt(t.scrolled[0])&&!1===n&&(y(),n=!0)}}))}(),"rightclick"===n&&e(document).on("contextmenu",(function(e){return e.preventDefault(),y(),!1})),"selectedtext"===n&&e(document).on("mouseup",(function(e){(window.getSelection&&window.getSelection()||document.getSelection&&document.getSelection()||document.selection&&document.selection.createRange&&document.selection.createRange().text).toString().length>2&&y()})),function(){const n=t.triggers[0];let o="#"+n+", ."+n+', a[href$="'+n+'"]';void 0!==t.openSelectors&&""!==t.openSelectors.trim()&&(o+=`, ${t.openSelectors}`),e(o).on("click",(function(e){e.preventDefault(),h()}))}()}(),function(){const n=t.triggers[1];let o="#"+n+", ."+n+', a[href$="'+n+'"], #'+t.triggers[2];void 0!==t.closeSelectors&&""!==t.closeSelectors.trim()&&(o+=`, ${t.closeSelectors}`),e(o).on("click",(function(e){e.preventDefault(),v()})),e(r).find(".modal-close-button").on("click",(function(){v()})),e(r).find(".modal-window__close").on("click keydown",(function(e){"click"!==e.type&&"Enter"!==e.key&&" "!==e.key||v()}))}(),t.closeAction[1]&&e(window).on("keydown",(function(e){"Escape"!==e.key&&"Esc"!==e.key||v()})),!0===t.closeAction[0]&&(e(c).addClass("is-clickable"),e(c).on("click",(function(n){e(n.target).closest(".modal-window__content").length||v()})))}))},"undefined"!=typeof ModalWindow)for(var n in ModalWindow)ModalWindow.hasOwnProperty(n)&&"nonce"!==n&&"ajax"!==n&&e("#"+n).ModalWindow(ModalWindow[n])}));